var activeDiv,w,l,newDivEmpty,o,activeUpload=!1,activeAuthors=!1,textboxAdd=120,isPhoneOrPad=!1,iskiosk=!1,templateBlank=!1,your_rating_is_registered_thank_you="Your rating is registered. Thank you!",poppedUp=!1,popupboxtextmultiplier=2;function callSaveLogout(){$("#VisitorMaintenance").dialog({modal:!0,zIndex:100001,buttons:{Ok:function(){$(this).dialog("close")}}}),setTimeout(function(){location.reload(!0)},3e5)}function AddButtonToTheIframe(t){var e=0;$("iframe:not([src*='vimeo.com'],[src*='youtube.com'])",t).each(function(){$("<input id='fullscreenIframe"+e+"' style='border-bottom-right-radius:0px;border-bottom-left-radius:0px;margin-bottom:-1px;' type='button' value='Full screen' class='btn btn-info btn-sm rounded-bottom'></div>").insertBefore(this),$("#fullscreenIframe"+e).on("click",()=>{var t=Math.round(.9*$(document).height()),e=Math.round(.9*$(document).width());console.log(event),$.fancybox({type:"iframe",href:this.src,width:e,height:t,hideOnContentClick:!0})}),e++})}$(function(){if((iskiosk=$("body").hasClass("kiosk"))||window.parent!=window&&window.history&&window.history.pushState&&window.parent.history.pushState({},document.title,"/?s="+$("#PageShortName").val()),$.getScript("https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"),$("a[href]").each(function(){$(this).attr("target","_blank")}),$(".img-uploader").remove(),$("body").addClass("iposter"),void 0!==$.cookie("gb")){var t=$.cookie("gb");$(".back-button").addClass("visible").on("touchend click",function(){document.location.href="/Default.aspx?s="+t}),$.removeCookie("gb")}$(document).click(function(){window.parent!=window&&window.parent.iframeClicked()});"undefined"==typeof printPDF&&$(".block .text").each(function(){$(this).data("content",$(this).html())}),"undefined"!=typeof abstractid&&$("#poster-id").text(abstractid),"undefined"==typeof printPDF?"undefined"!=typeof devmode&&devmode?$("head").append('<link media="all" rel="stylesheet" href="/templates/iPosters/styles/fluid.css">'):$("head").append('<link media="all" rel="stylesheet" href="/templates/iPosters/styles/fluid.min.css">'):($("#slider-message, #slider-toolbar").hide(),$(".close,.more").remove(),$(".scrollable-area-wrapper,.scrollable-area").each(function(){$(this).attr("style","")}),$(".text span[style]").each(function(){var t=rgb2hex($(this).css("color")),e=getContrast2(t);if("bright"==e){for(;"bright"==e;)t=tinycolor(t).darken().toString(),e=getContrast2(t);$(this).css("color",t)}})),$("#edit-disclosure-wrapper").hide(),$("#edit-cv-wrapper").hide(),$("#edit-abstract-wrapper").hide(),$("#edit-references-wrapper").hide(),"undefined"==typeof guestView&&$("body").hasClass("kiosk")&&$("body").css("overflow","hidden"),"undefined"==typeof guestView&&$("body").css("-ms-content-zooming","none").css("-ms-user-select","none"),"undefined"!=typeof attendeeRating&&($("#attendee-rating div").raty({path:"/common/script/raty-2.7.0/lib/images/",click:function(t,e){$("#loading h3").html(your_rating_is_registered_thank_you),$(".loading").show(),$("#attendee-rating").fadeOut("fast"),$.ajax({type:"POST",url:"/Plugins/Dialog/DialogService.asmx/AddPublicRating",contentType:"application/json; charset=utf-8",dataType:"json",data:"{sourceID:'"+$("#PageShortName").val()+"',key:'Attendee',rating:'"+t+"'}",success:function(t){t.d;setTimeout(function(){$(".loading").hide(),$("#loading h3").html("LOADING"),$("#attendee-rating").fadeIn(),$("#attendee-rating div").raty("reload")},2500)},error:function(t,e,o){$("#loading h3").html("ERROR. Please notify staff."),setTimeout(function(){$(".loading").hide()},1500)}})}}),$("#attendee-rating").css("display","table-cell")),$(".block h2").each(function(){""==$(this).text()&&$(this).height("1vw").css("overflow","hidden").css("padding","0")}),$(".block .scrollable-area-wrapper .scrollable-area .text").each(function(){"Click to enter content"==$(this).text()&&$(this).text("")}),$("#noticeClose").click(function(){$("#fancybox-close").trigger("click")}),$(".block a[href]").each(function(){$(this).attr("target","_blank")}),$(document).on("touchend click","body:not(.kiosk) #popuptextbox a[href]",function(){$(this).attr("target","_blank")}),$(document).on("touchend click","body.kiosk:not(.lnkmod) .block a[href], body.kiosk:not(.lnkmod) #popuptextbox a[href]",function(){var t=$(this).attr("href");return msgToWD((t=encodeURIComponent(t))+"|1|2|1780x960|0| | |")}),$(document).on("touchend click","body.lnkmod .block a[href], body.lnkmod #popuptextbox a[href]",function(){$("#externallink-title").text($(this).attr("href")),$("#externallink-modal").append('<iframe src="'+$(this).attr("href")+'"></iframe>');var t=Math.round(.9*$(document).height()),e=Math.round(.9*$(document).width());return $.fancybox({padding:0,cyclic:!1,overlayShow:!0,overlayOpacity:.4,overlayColor:"#000000",titlePosition:"inside",width:e,height:t,autoSize:!1,autoDimensions:!1,href:"#popup-externallink",onComplete:function(){$("body").addClass("externallink")},onClosed:function(){$("body").removeClass("externallink"),$("#externallink-modal > iframe").remove()}}),!1}),"undefined"==typeof printPDF&&$("#main .block").on("mousedown",function(){$(this).find("iframe").each(function(){$(this).attr("src",$(this).attr("src"))});var t=iskiosk?"10.1vw":"0";$("body").append('<div id="popuptextbox"><h2 class="texttitle"></h2><div style="overflow-x:hidden;overflow-y:auto;" class="content"></div></div><div id="popuptextboxback" style="position:fixed;top:'+t+';bottom:0;right:0;left:0;background:rgba(0,0,0,0.7);z-index:49999;text-align:right;padding:1vw 2vw;font-size:3vw;"><i class="fa fa-times" aria-hidden="true"></i></div>');var e=$("#popuptextbox");e.attr("style","position:fixed;top:"+t+";bottom:0;left:0;right:0;margin-left:auto;margin-right:auto;z-index:50000;"),$("#popuptextboxback").on("click",function(){$("#popuptextbox,#popuptextboxback").remove()});var o=parseFloat(100/$(window).width())*popupboxtextmultiplier,n=$(this).width(),i=parseFloat(n)*o;i>90&&(i=90),e.attr("style",e.attr("style")+"width:"+i.toFixed(2)+"vw;");var a=$(this).children("h2");$("#popuptextbox .texttitle").css("background",a.css("background-color")).css("font-family",a.css("font-family")).css("color",a.css("color")).css("font-weight",a.css("font-weight")),$("#popuptextbox .texttitle").html(a.html());var r=$(this),l=r.children(".scrollable-area-wrapper").children(".scrollable-area").children(".text");r.css("background-color")+""!="rgba(0, 0, 0, 0)"&&r.css("background-color")+""!="transparent"&&e.css("background",r.css("background-color")),$("#popuptextbox, .content").css("font-family",l.css("font-family")).css("color",l.css("color"));var d=l.data("content"),s=$("<div>"+d+"</div>");$("p",s).each(function(){$(this).css("margin-bottom","2px")}),$("iframe[src^='//player.vimeo.com'], iframe[src^='https://player.vimeo.com'], iframe[src^='http://player.vimeo.com'], iframe[src^='//www.youtube.com'], iframe[src^='http://www.youtube.com'], iframe[src^='https://www.youtube.com']",s).each(function(){var t=$("#popuptextbox .content").width();$(this).width(t).height((.5625*t).toFixed(0))}),content=s.html(),poppedUp=!0,$("#popuptextbox .content").html(content),s.remove(),MathJax.Hub.Queue(["Typeset",MathJax.Hub]),createCharts();var c=$(document).width()/100*3.28;$("#popuptextbox .content").css("height",$("#popuptextbox").outerHeight()-$("#popuptextbox .texttitle").outerHeight()-c),iframeFix($("div.content")),videoFix(),AddButtonToTheIframe($("#popuptextbox"))}),checkModals(),$("#edit-background").click(resetEdit),$(".btn_Start_Session").unbind("click").bind("click",function(){var t=$("#hdnSessionURL").val();""!=t?(-1==t.lastIndexOf("http")&&(t="https://"+t),window.open(t)):alert("Incorrect meeting address. Please contact the author directly!")})}),$(window).load(function(){if($(".audioplayerwrapper").hide(),""!==$("#notice .text").html()&&"true"==$("#EnableNoticePopup").val()&&$("#noticeButton").click(),$(document).on("click",".block video, .columns video, #popuptextbox video",function(t){poppedUp||t.stopPropagation();let e=$(this).attr("src");if(cloudImageService.isImageFile(e)){var o=Math.round(.8*$(document).height()),n=Math.round(.8*$(document).width());$.fancybox('<video autoplay muted loop style="width:'+n+"px;height:"+o+'px;" src="'+e+'"></video>')}}),$(document).on("click",".block img, .columns img, #popuptextbox img",function(t){poppedUp||t.stopPropagation(),void 0===$(this).parents().closest("a").attr("href")&&$.fancybox({href:$(this).attr("src"),alt:$(this).attr("alt"),hideOnContentClick:!0})}),$("img").attr("title",""),"undefined"!=typeof counterenabled&&($("#countdown").addClass("show"),myminutes=countdown/60,myseconds=countdown-60*(myminutes-1),myseconds="60"==myseconds?0:myseconds,$("#countdown > div > div").text((myseconds+"").length>1?"0"+myminutes+":"+myseconds:"0"+myminutes+":0"+myseconds),$("#PresentationTimer").dialog({modal:!0,closeOnEscape:!1,open:function(t,e){$(".ui-dialog-titlebar-close, .ui-dialog-content").hide(),$(".ui-dialog-buttonset, .ui-dialog-title").css("float","none"),$(".ui-dialog-buttonpane, .ui-dialog-titlebar").css("text-align","center"),$(".ui-dialog-buttonpane").css("padding","0")},buttons:[{text:"Start Presentation",click:function(){$(this).dialog("close"),$(".ui-dialog-titlebar-close, .ui-dialog-content").show(),$(".ui-dialog-buttonset, .ui-dialog-title").css("float",""),$(".ui-dialog-buttonpane, .ui-dialog-titlebar").css("text-align",""),$(".ui-dialog-buttonpane").css("padding",""),doCountdown()}}]})),$(".iposteraudioplayer").length>0)var t=audiojs.create(document.getElementsByClassName("iposteraudioplayer"));$(document).on("click",".playaudio",function(e,o){var n=$("#"+this.id).data("url"),i=t[0];""!=s3Folder?i.load(n.replace("/GetFile.ashx?file=",s3Folder)):i.load(n.replace("GetFile.ashx","GetAudio.ashx")),i.play(),$(".audioplayerwrapper").show()}),$(document).on("click",".closeaudio",function(e,o){t[0].pause(),$(".audioplayerwrapper").hide()}),"undefined"!=typeof s3Folder&&""!=s3Folder||$("audio").each(function(){var t=$(this),e=t.attr("src");t.attr("src",e.replace("GetFile.ashx","GetAudio.ashx"))}),""!=s3Folder&&$(".block img").each(function(){if(void 0!==this.naturalWidth&&0==this.naturalWidth||"uninitialized"==this.readyState){var t=$(this).attr("src");t.indexOf("GetFile.ashx")>-1&&(t=t.substring(t.lastIndexOf("/")+1),$(this).addClass("awserror").attr("src","/GetFile.ashx?file="+t),checkResource("/GetFile.ashx?file="+t))}}),$("body").hasClass("kiosk")?$("#printpanel").hide():$("#attendee-rating").hide(),$(".utctolocaltime-function").each(function(){var t=$(this),e=t.data("starttimeutc"),o=t.data("endtimeutc");t.attr("datetime",e.trim()),t.text(toTimeZone(e).format("LLL")+"-"+toTimeZone(o).format("LT")+" "+tzAbbr())})});const format="YYYY-MM-DD HH:mm ZZ";function toTimeZone(t,e){return e=e||(new Date).getTimezoneOffset(),moment(t,format).lang(navigator.language).zone(e)}var tzAbbr=function(t){var e=(t||new Date)+"",o=e.match(/\(([^\)]+)\)$/)||e.match(/([A-Z]+) [\d]{4}$/);return o&&(o=null!=(o=o[1].match(/[A-Z]/g))?o.join(""):""),o};function checkResource(t){var e=new XMLHttpRequest;e.open("HEAD",t,!0),e.send(),e.status,403===e.status&&console.log("Broken picture:"+t)}function resetEdit(){activeDiv&&($("#edit-background").hide(),activeDiv.removeClass("must-hide").prev(".close").removeClass("must-show").closest(".block").attr("style",""),activeDiv.parent().prev().hasClass("helper")&&activeDiv.parent().prev().height(1).removeClass("active"),activeDiv=null,l=-1,setTimeout(function(){jQuery(".scrollable-area-wrapper").css({height:""}),initAll(),jcf.customForms.refreshAll()},100))}function OnClientColorChange(){if(!templateBlank){var t=$find("FillColor").get_selectedColor(),e=$find("GradientColor").get_selectedColor();if(null!=t)var o="background:"+t+" !important;";null!=t&&null!=e&&(o+="background:-moz-linear-gradient(top,  "+t+" 0%, "+e+" 100%) !important;background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+t+"), color-stop(100%,"+e+")) !important;background:-webkit-linear-gradient(top,  "+t+" 0%,"+e+" 100%) !important; background:-o-linear-gradient(top,  "+t+" 0%,"+e+" 100%) !important; background:-ms-linear-gradient(top,  "+t+" 0%,"+e+" 100%) !important; background:linear-gradient(to bottom,  "+t+" 0%,"+e+" 100%) !important;"),clearStyle("backgroundColorCSS"),null!=t?(addStyle("backgroundColorCSS","#wrapper",o,"#background-image{ "+o+" }"),$("#iFillColor").val(t)):$("#iFillColor").val(""),null!=e?$("#iGradientColor").val(e):$("#iGradientColor").val(""),addStyleToTitle("titleTextColorCSS","TitleTextColor","#header .holder h2,.footer .textholder h2"),addStyleToTitle("subtitleTextColorCSS","SubtitleTextColor","#header .holder h3,#header .holder h4,.footer .textholder h3,.footer .textholder h4"),addColorStyleToElem("textBoxTitleColorCSS","TextboxTitleColor","color",".column .block h2"),addColorStyleToElem("textBoxTitleBackgroundColorCSS","TextboxTitleBackgroundColor","background-color",".column .block h2"),addColorStyleToElem("textboxTitleMiddleBackgroundColorCSS","TextboxTitleMiddleBackgroundColor","background-color",".column .block.bg1 h2"),addColorStyleToElem("textBoxTextboxColorCSS","TextboxTextColor","color",".column .block:not(.bg1):not(.center) .text"),addColorStyleToElem("sideTextboxColorCSS","SideTextboxBackgroundColor","background",".column .block:not(.bg1):not(.bg2)"),addColorStyleToElem("middleTextBoxTextboxColorCSS","MiddleTextboxTextColor","color",".column .block.bg1 .text"),addColorStyleToElem("middleTextboxColorCSS","MiddleTextBackgroundColor","background",".column .block.bg1"),addColorStyleToElem("centerTextBoxTextboxColorCSS","CenterTextboxTextColor","color",".column .block.center .text"),addColorStyleToElem("centerTextboxColorCSS","CenterTextBackgroundColor","background",".column .block.center"),addStyleToElem("titleTextFontCSS","TitleTextFont","font-family","#header .holder h2,.footer .textholder h2"),addStyleToElem("subtitleTextFontCSS","SubtitleTextFont","font-family","#header .holder h3,#header .holder h4,.footer .textholder h3,.footer .textholder h4"),addStyleToElem("textboxTitleFontCSS","TextboxTitleFont","font-family",".column .block h2"),addStyleToElem("textboxTextCSS","TextboxTextFont","font-family",".column .block"),addImageStyleToElem("arrowColor","ArrowColor","background",".column .block .more span"," no-repeat 50% 100% !important; background-size: contain "),"bg-more.png"==$("#ArrowColor").val()?addStyle("arrowFontColor",".more span","color:#ddd !important;"):addStyle("arrowFontColor",".more span","color:#555 !important;")}return!0}function clearStyle(t){$("#"+t).length>0&&$("#"+t).remove()}function addStyle(t,e,o,n,i){if($("#"+t).length>0&&$("#"+t).remove(),n+""=="undefined"&&(n=""),null!=o&&"undefined"!=o&&""!=o){var a=$("form").first();""!=i&&$(i).length>0&&(a=$(i)),a.after("<style id='"+t+"'>"+e+"{ "+o+" }"+n+"</style>")}}function addStyleToElem(t,e,o,n){if(clearStyle(t),""==n)$("#"+e).val("");else{var i=$("#"+e).val(),a="",r=n;null!=i&&""!=i&&(a+=o+": "+i+" !important;"),a.length>0&&addStyle(t,r,a)}}function addImageStyleToElem(t,e,o,n,i){if(clearStyle(t),""==n)$("#"+e).val("");else{var a=$("#"+e).val();i+""=="undefined"&&(i="");var r="",l=n;null!=a&&""!=a&&(r+=o+": url(/Common/Images/SIWI/"+a+") "+i+" !important;"),r.length>0&&addStyle(t,l,r)}}function addColorStyleToElem(t,e,o,n){clearStyle(t);var i=$find(e),a=null;if(""==n)i.set_selectedColor(null);else{null!=i&&(a=i.get_selectedColor());var r="",l=n;null!=a&&""!=a&&(r+=o+": "+a+" !important;"),r.length>0&&addStyle(t,l,r)}null!=a&&""!=a?$("#i"+e).val(""+a):$("#i"+e).val("")}function addStyleToTitle(t,e,o){clearStyle(t);var n=null;if(""==o)$find(e).set_selectedColor(null);else{var i="",a=o;null!=(n=$find(e).get_selectedColor())&&(i+="color: "+n+" !important;"),i.length>0&&addStyle(t,a,i)}null!=n?$("#i"+e).val(n):$("#i"+e).val("")}function iframeFix(t){$("iframe:not([src*='vimeo.com'],[src*='youtube.com'])",t).each(function(){$(this).width("100%").height(9*this.offsetWidth/16)})}function resizeIframe(t){$("iframe:not([src*='vimeo.com'],[src*='youtube.com'])",t).each(function(){$(this).height(9*this.offsetWidth/16)})}function audioFix(){"undefined"!=typeof printPDF&&""!=printPDF&&$("audio").remove()}function videoFix(){var t=1;$("body:not(page2) iframe[src*='player.vimeo.com'], body:not(page2) iframe[src*='youtube.com']").each(function(){"undefined"==typeof printPDF?0==$(this).parents(".cf-page").length&&($(this).attr("id","video"+t),t++,this.style.padding="0px",$(this).width("100%").height("100%")):$(this).hide().after('<p class="compressed">[VIDEO] '+$(this).attr("src")+"</p>")}),$("body video[src*='res.cloudinary.com']").each(function(){"undefined"==typeof printPDF?0==$(this).parents(".cf-page").length&&($(this).attr("id","video"+t),t++,this.style.padding="0px",$(this).width("100%").height("100%")):$(this).hide().after('<p class="compressed">[VIDEO] '+$(this).attr("src")+"</p>")})}function scrollFix(){window.innerHeight>=document.body.offsetHeight?$("body").addClass("noscroll"):$("body").removeClass("noscroll")}$(window).load(function(){OnClientColorChange()&&($(".loading").fadeOut(),"undefined"==typeof printPDF&&setTimeout(function(){jQuery(".scrollable-area-wrapper").css({height:""}),initAll(),jcf.customForms.refreshAll()},100))}),$(function(){videoFix(),scrollFix(),iframeFix($("div.text")),setTimeout(function(){audioFix()},500),"undefined"==typeof printPDF&&$(window).resize(function(){resizeIframe($("div.text")),resizeIframe($("div.content"))})});var timer,timer_active=!1;function doCountdown(){timer_active&&(timer=window.clearInterval(timer)),$("#countdown").addClass("show"),myminutes=countdown/60,myseconds=countdown-60*(myminutes-1),myseconds="60"==myseconds?0:myseconds,$("#countdown > div > div").text((myseconds+"").length>1?"0"+myminutes+":"+myseconds:"0"+myminutes+":0"+myseconds),timer=window.setInterval(function(){switch(timer_active=!0,countdown--,myminutes=parseInt(countdown/60),myseconds=parseInt(countdown-60*myminutes),myseconds="60"==myseconds?0:myseconds,$("#countdown > div > div").text((myseconds+"").length>1?"0"+myminutes+":"+myseconds:"0"+myminutes+":0"+myseconds),countdown){case 120:$("#countdown").addClass("time-warning-1");break;case 30:$("#countdown").removeClass("time-warning-1").addClass("time-warning");break;case 4:case 2:$("#countdown").addClass("time-warning");break;case 5:case 3:case 1:$("#countdown").removeClass("time-warning");break;case 0:$("#countdown").addClass("time-warning"),$("#TimeIsUp").dialog({modal:!0,closeOnEscape:!0,open:function(t,e){$(".ui-dialog-buttonset, .ui-dialog-title").css("float","none"),$(".ui-dialog-buttonpane, .ui-dialog-titlebar").css("text-align","center"),$(".ui-dialog-buttonpane").css("padding","0")},buttons:[{text:"Close",click:function(){$(this).dialog("close"),$(".ui-dialog-buttonset, .ui-dialog-title").css("float",""),$(".ui-dialog-buttonpane, .ui-dialog-titlebar").css("text-align",""),$(".ui-dialog-buttonpane").css("padding","")}}]})}countdown<=0&&(timer_active=!1,timer=window.clearInterval(timer),$("#countdown > div > div").text("Time's up!"))},1e3)}function checkModals(){"undefined"==referencesEmpty||referencesEmpty&&$("#references").addClass("hide-print"),"undefined"==abstractEmpty||abstractEmpty&&$("#abstract").addClass("hide-print"),"undefined"==cvEmpty||cvEmpty&&$("#cv").addClass("hide-print"),"undefined"==disclosureEmpty||disclosureEmpty&&$("#disclosure").addClass("hide-print"),"undefined"==noticeEmpty||noticeEmpty&&$("#notice").addClass("hide-print"),$("#disclosure-show, #references-show, #cv-show, #abstract-show").css("height","auto !important")}function getContrast(t){return t=t.replace("#","0x"),parseInt(t,16)>12303291?"bright":"ok"}function rgb2hex(t){if(/^#[0-9A-F]{6}$/i.test(t))return t;function e(t){return("0"+parseInt(t).toString(16)).slice(-2)}return"#"+e((t=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))[1])+e(t[2])+e(t[3])}var getContrast2=function(t){return"#"===t.slice(0,1)&&(t=t.slice(1)),3===t.length&&(t=t.split("").map(function(t){return t+t}).join("")),(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>=170?"bright":"good"};function msgToWD(t){try{return window.external.iPosterMsgIE(t),!1}catch(t){}try{return jsmessaging.iPosterMsgChr(t),!1}catch(t){return!0}}